# å¡”ç½—ç‰Œå åœWebåº”ç”¨ - é¡¹ç›®å…¨å±€è§„åˆ™

## é¡¹ç›®ç®€ä»‹

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„åœ¨çº¿å¡”ç½—ç‰Œå åœå¹³å°ï¼Œæ”¯æŒå¤šç§å åœå¸ƒå±€ã€78å¼ å®Œæ•´ç‰Œåº“ã€ä¸°å¯Œçš„å…ƒæ•°æ®å±•ç¤ºã€‚

**å½“å‰ç‰ˆæœ¬**: v1.0-devï¼ˆWebåŒ–æ”¹é€ ä¸­ï¼‰
**æŠ€æœ¯æ ˆ**: Python 3.x, Flask, Pandas, Bootstrap 5
**å¼€å‘ç¯å¢ƒ**: Condaç¯å¢ƒ `tarot`

---

## é¡¹ç›®ç»“æ„

```
D:\code\python-game-master\python-game-master/
â”œâ”€â”€ CLAUDE.md                    # æœ¬æ–‡ä»¶ï¼šé¡¹ç›®å…¨å±€è§„åˆ™
â”œâ”€â”€ README.md                    # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ requirements.txt             # Pythonä¾èµ–ç®¡ç†
â”œâ”€â”€ run.py                       # Flaskåº”ç”¨å¯åŠ¨å™¨ï¼ˆå¾…åˆ›å»ºï¼‰
â”œâ”€â”€ docs/                        # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ ROADMAP.md              # é¡¹ç›®è·¯çº¿å›¾
â”‚   â”œâ”€â”€ tasks/                  # ä»»åŠ¡ç®¡ç†
â”‚   â”œâ”€â”€ references/             # æŠ€æœ¯å‚è€ƒ
â”‚   â””â”€â”€ logs/                   # å¼€å‘æ—¥å¿—
â”œâ”€â”€ webapp/                      # Flaskåº”ç”¨ï¼ˆå¾…åˆ›å»ºï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ routes.py
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ templates/
â”‚   â””â”€â”€ static/
â”œâ”€â”€ data/                        # æ•°æ®æ–‡ä»¶
â”‚   â””â”€â”€ (CSVæ–‡ä»¶)
â”œâ”€â”€ tests/                       # æµ‹è¯•ç›®å½•
â”‚   â””â”€â”€ (å•å…ƒæµ‹è¯•)
â””â”€â”€ reference_project/           # å‚è€ƒé¡¹ç›®ï¼ˆpython-tarot-masterï¼‰
```

---

## å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼

1. **Pythonä»£ç è§„èŒƒ**
   - éµå¾ª PEP 8 é£æ ¼æŒ‡å—
   - ä½¿ç”¨4ä¸ªç©ºæ ¼ç¼©è¿›ï¼ˆä¸ä½¿ç”¨Tabï¼‰
   - ç±»åä½¿ç”¨å¤§é©¼å³°å‘½åï¼š`CardManager`, `ReadingEngine`
   - å‡½æ•°/å˜é‡ä½¿ç”¨ä¸‹åˆ’çº¿å‘½åï¼š`get_card_data`, `card_list`
   - ç§æœ‰æ–¹æ³•ä½¿ç”¨å•ä¸‹åˆ’çº¿å‰ç¼€ï¼š`_internal_method`

2. **æ–‡æ¡£å­—ç¬¦ä¸²**
   ```python
   def function_name(param1, param2):
       """
       ç®€çŸ­æè¿°å‡½æ•°åŠŸèƒ½

       Args:
           param1 (type): å‚æ•°1è¯´æ˜
           param2 (type): å‚æ•°2è¯´æ˜

       Returns:
           type: è¿”å›å€¼è¯´æ˜
       """
       pass
   ```

3. **HTML/CSSè§„èŒƒ**
   - HTMLä½¿ç”¨2ä¸ªç©ºæ ¼ç¼©è¿›
   - CSSç±»åä½¿ç”¨å°å†™+è¿å­—ç¬¦ï¼š`tarot-card`, `reading-result`
   - éµå¾ªè¯­ä¹‰åŒ–HTMLæ ‡ç­¾ä½¿ç”¨

### å‘½åçº¦å®š

1. **æ–‡ä»¶å‘½å**
   - Pythonæ¨¡å—ï¼šå°å†™+ä¸‹åˆ’çº¿ `card_manager.py`
   - æµ‹è¯•æ–‡ä»¶ï¼š`test_` å‰ç¼€ `test_routes.py`
   - æ¨¡æ¿æ–‡ä»¶ï¼šå°å†™+ä¸‹åˆ’çº¿ `card_detail.html`

2. **å˜é‡å‘½å**
   - å¸¸é‡ï¼šå…¨å¤§å†™+ä¸‹åˆ’çº¿ `MAX_CARDS = 78`
   - é…ç½®é¡¹ï¼šå¤§å†™+ä¸‹åˆ’çº¿ `SECRET_KEY`, `DEBUG_MODE`

### Gitæäº¤è§„èŒƒ

ä½¿ç”¨è¯­ä¹‰åŒ–æäº¤æ¶ˆæ¯ï¼š

```
<type>(<scope>): <subject>

<body>

<footer>
```

**Typeç±»å‹**ï¼š
- `feat`: æ–°åŠŸèƒ½
- `fix`: Bugä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- `refactor`: é‡æ„ä»£ç 
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»º/å·¥å…·é“¾ç›¸å…³

**ç¤ºä¾‹**ï¼š
```
feat(webapp): æ·»åŠ å•å¡å åœåŠŸèƒ½

- åˆ›å»º one_card.html æ¨¡æ¿
- å®ç° /one-card è·¯ç”±
- é›†æˆéšæœºæŠ½ç‰Œé€»è¾‘

Closes #12
```

---

## docs/ ç›®å½•ä½¿ç”¨è¯´æ˜

### ç›®å½•ç»“æ„

```
docs/
â”œâ”€â”€ ROADMAP.md           # é¡¹ç›®è·¯çº¿å›¾å’Œé‡Œç¨‹ç¢‘
â”œâ”€â”€ tasks/               # ä»»åŠ¡ç®¡ç†æ–‡ä»¶å¤¹
â”‚   â”œâ”€â”€ 001-xxx.md      # ä»»åŠ¡æŒ‰ç¼–å·å‘½å
â”‚   â””â”€â”€ 002-xxx.md
â”œâ”€â”€ references/          # æŠ€æœ¯å‚è€ƒèµ„æ–™
â”‚   â”œâ”€â”€ architecture.md  # æ¶æ„è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ api-spec.md     # APIè§„èŒƒ
â”‚   â””â”€â”€ resources.md    # å¤–éƒ¨èµ„æºé“¾æ¥
â””â”€â”€ logs/                # å¼€å‘æ—¥å¿—
    â””â”€â”€ session-YYYYMMDD.md  # æŒ‰æ—¥æœŸå‘½å
```

### ä½¿ç”¨è§„èŒƒ

1. **ä»»åŠ¡æ–‡ä»¶ï¼ˆtasks/ï¼‰**
   - å‘½åæ ¼å¼ï¼š`ç¼–å·-ç®€çŸ­æè¿°.md`ï¼ˆå¦‚ `001-data-extraction.md`ï¼‰
   - å¿…é¡»åŒ…å«ï¼šä»»åŠ¡ç›®æ ‡ã€çŠ¶æ€ã€è´Ÿè´£äººã€é¢„è®¡æ—¶é—´ã€è¯¦ç»†æ­¥éª¤ã€éªŒæ”¶æ ‡å‡†
   - çŠ¶æ€æ ‡è¯†ï¼šğŸ“‹ å¾…å¼€å§‹ | â³ è¿›è¡Œä¸­ | âœ… å·²å®Œæˆ | ğŸš§ é˜»å¡

2. **å‚è€ƒæ–‡æ¡£ï¼ˆreferences/ï¼‰**
   - æŠ€æœ¯è®¾è®¡ã€APIè§„èŒƒã€èµ„æºé“¾æ¥ç­‰
   - ä¿æŒåŠæ—¶æ›´æ–°ï¼Œä¸ä»£ç å®ç°åŒæ­¥

3. **å¼€å‘æ—¥å¿—ï¼ˆlogs/ï¼‰**
   - æ¯æ¬¡å¼€å‘ä¼šè¯åˆ›å»ºä¸€ä¸ªæ—¥å¿—æ–‡ä»¶
   - è®°å½•å½“å¤©çš„å·¥ä½œå†…å®¹ã€å†³ç­–ã€é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

---

## æŠ€æœ¯æ ˆè¯¦è§£

### åç«¯æŠ€æœ¯

- **Python 3.10+**: ä¸»è¦ç¼–ç¨‹è¯­è¨€
- **Flask 2.x**: Webæ¡†æ¶
- **Pandas**: æ•°æ®å¤„ç†ï¼ˆè¯»å–CSVï¼‰
- **Gunicorn**: WSGIæœåŠ¡å™¨ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

### å‰ç«¯æŠ€æœ¯

- **Bootstrap 5**: CSSæ¡†æ¶
- **Jinja2**: æ¨¡æ¿å¼•æ“ï¼ˆFlaskå†…ç½®ï¼‰
- **HTML5/CSS3**: æ ‡å‡†WebæŠ€æœ¯

### æ•°æ®ç®¡ç†

- **CSVæ ¼å¼**: ç‰Œæ•°æ®å­˜å‚¨
  - `TarotCards_Full.csv` - å®Œæ•´78å¼ ç‰Œæ•°æ®
  - å­—æ®µï¼šname, desc, rdesc, message, qabalah, hebrew_letter, meditation, cardtype, sequence, image_path

### å¼€å‘å·¥å…·

- **Conda**: ç¯å¢ƒç®¡ç†ï¼ˆç¯å¢ƒåï¼š`tarot`ï¼‰
- **Git**: ç‰ˆæœ¬æ§åˆ¶
- **Unittest**: å•å…ƒæµ‹è¯•æ¡†æ¶

---

## ä¾èµ–ç®¡ç†

### requirements.txt ç»´æŠ¤

**æ ¸å¿ƒä¾èµ–**ï¼š
```txt
Flask==2.3.0
pandas==2.0.0
gunicorn==21.2.0
```

**å¼€å‘ä¾èµ–**ï¼š
```txt
pytest==7.4.0
black==23.7.0
flake8==6.1.0
```

**æ›´æ–°æµç¨‹**ï¼š
1. æ·»åŠ æ–°ä¾èµ–åè¿è¡Œï¼š`pip freeze > requirements.txt`
2. æˆ–æ‰‹åŠ¨ç¼–è¾‘ `requirements.txt`ï¼Œç„¶åè¿è¡Œï¼š`pip install -r requirements.txt`
3. æäº¤æ—¶ç¡®ä¿ç‰ˆæœ¬å·å›ºå®šï¼ˆé¿å…å…¼å®¹æ€§é—®é¢˜ï¼‰

---

## æµ‹è¯•è§„èŒƒ

### å•å…ƒæµ‹è¯•è¦æ±‚

1. **æµ‹è¯•è¦†ç›–ç‡**
   - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼šâ‰¥ 90%
   - è·¯ç”±å¤„ç†ï¼šâ‰¥ 80%
   - å·¥å…·å‡½æ•°ï¼šâ‰¥ 95%

2. **æµ‹è¯•æ–‡ä»¶ç»„ç»‡**
   ```
   tests/
   â”œâ”€â”€ test_models.py       # æµ‹è¯• CardManager, ReadingEngine
   â”œâ”€â”€ test_routes.py       # æµ‹è¯• Flask è·¯ç”±
   â””â”€â”€ test_data_processing.py  # æµ‹è¯•æ•°æ®å¤„ç†
   ```

3. **æµ‹è¯•å‘½åè§„èŒƒ**
   ```python
   def test_card_manager_load_csv():
       """æµ‹è¯•CardManagerèƒ½å¦æ­£ç¡®åŠ è½½CSVæ–‡ä»¶"""
       pass

   def test_reading_engine_three_cards():
       """æµ‹è¯•ä¸‰å¡å åœé€»è¾‘"""
       pass
   ```

4. **è¿è¡Œæµ‹è¯•**
   ```bash
   # è¿è¡Œæ‰€æœ‰æµ‹è¯•
   python -m unittest discover tests

   # è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
   python -m unittest tests.test_models
   ```

---

## ç¯å¢ƒé…ç½®

### Condaç¯å¢ƒæ¿€æ´»

```bash
conda activate tarot
```

### ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆä¸æäº¤åˆ°Gitï¼‰ï¼š
```env
FLASK_APP=run.py
FLASK_ENV=development
SECRET_KEY=your-secret-key-here
DEBUG=True
```

### è¿è¡Œå¼€å‘æœåŠ¡å™¨

```bash
# æ¿€æ´»ç¯å¢ƒ
conda activate tarot

# è¿è¡ŒFlaskåº”ç”¨
python run.py

# æˆ–ä½¿ç”¨Flaskå‘½ä»¤
flask run --host=0.0.0.0 --port=5000
```

---

## éƒ¨ç½²è§„èŒƒ

### Herokuéƒ¨ç½²

å¿…éœ€æ–‡ä»¶ï¼š
- `Procfile` - å¯åŠ¨å‘½ä»¤
- `runtime.txt` - Pythonç‰ˆæœ¬
- `requirements.txt` - ä¾èµ–åˆ—è¡¨

**Procfileå†…å®¹**ï¼š
```
web: gunicorn run:app
```

**runtime.txtå†…å®¹**ï¼š
```
python-3.10.5
```

---

## è´¡çŒ®æŒ‡å—

1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼š`git checkout -b feature/new-feature`
2. ç¼–å†™ä»£ç å¹¶éµå¾ªæœ¬æ–‡æ¡£è§„èŒƒ
3. è¿è¡Œæµ‹è¯•ç¡®ä¿é€šè¿‡
4. æäº¤ä»£ç å¹¶æ¨é€ï¼š`git push origin feature/new-feature`
5. åˆ›å»ºPull Request

---

## å‚è€ƒèµ„æº

- Flaskå®˜æ–¹æ–‡æ¡£: https://flask.palletsprojects.com/
- Bootstrap 5æ–‡æ¡£: https://getbootstrap.com/docs/5.0/
- Pandasæ–‡æ¡£: https://pandas.pydata.org/docs/
- PEP 8é£æ ¼æŒ‡å—: https://peps.python.org/pep-0008/

---

**æœ€åæ›´æ–°**: 2025-11-21
**ç»´æŠ¤è€…**: Claude Code + å¼€å‘å›¢é˜Ÿ
