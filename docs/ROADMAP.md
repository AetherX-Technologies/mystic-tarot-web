# 塔罗牌占卜Web应用 - 项目路线图

**项目愿景**: 打造一个功能完整、用户友好的在线塔罗牌占卜平台，提供专业的塔罗牌解读、学习资源和社区互动功能。

---

## 项目里程碑

### ✅ v0.1 - CLI命令行版本（已完成）

**完成时间**: 2019年2月
**核心功能**:
- [x] 22张大阿卡纳牌库
- [x] 3卡占卜（过去-现在-未来）
- [x] 6卡占卜（通用布局）
- [x] CSV数据驱动设计
- [x] Pandas数据处理
- [x] 面向对象架构（OpeningMessage, PandasToList, EndingMessage）
- [x] 单元测试（UnitTest.py）
- [x] 异常处理和输入验证
- [x] ANSI彩色终端输出

**技术栈**: Python 3.x, Pandas, CSV

**成果**: 功能完整的命令行占卜工具，代码质量高，易于维护

---

### ⏳ v1.0 - Web基础版（进行中）

**目标完成时间**: 2025年12月
**当前状态**: 📋 规划阶段

#### 核心目标
将CLI应用改造为Flask Web应用，提供现代化的用户界面和更丰富的功能。

#### 主要功能

1. **完整牌库** ✨
   - [x] 78张完整塔罗牌（22大牌 + 56小牌）
   - [x] 正逆位双解读
   - [x] 丰富元数据（Qabalah路径、希伯来字母、冥想文本）
   - [x] 78张高质量牌图

2. **多种占卜布局**
   - [ ] 单卡快速占卜
   - [ ] 三卡占卜（过去-现在-未来）
   - [ ] 六卡通用占卜（保留原功能）
   - [ ] 凯尔特十字布局（Celtic Cross）[可选]

3. **牌库学习功能**
   - [ ] 浏览所有78张牌
   - [ ] 按类型分类（大牌/小牌/宫廷牌）
   - [ ] 单张牌详情页（完整元数据展示）
   - [ ] 前后导航功能

4. **Web界面**
   - [ ] 响应式设计（Bootstrap 5）
   - [ ] 移动设备友好
   - [ ] 现代化UI/UX
   - [ ] 牌图片展示

5. **技术架构**
   - [ ] Flask Web框架
   - [ ] 保留OOP设计（重构为CardManager, ReadingEngine）
   - [ ] 继续使用CSV数据格式
   - [ ] 扩展单元测试覆盖
   - [ ] Heroku部署配置

#### 详细任务列表

参见 `docs/tasks/` 目录：
- [📋 001-data-extraction.md](tasks/001-data-extraction.md) - 数据提取与整合
- [📋 002-flask-setup.md](tasks/002-flask-setup.md) - Flask应用架构
- [📋 003-web-interface.md](tasks/003-web-interface.md) - Web界面开发
- [📋 004-core-features.md](tasks/004-core-features.md) - 核心功能实现
- [📋 005-testing-deployment.md](tasks/005-testing-deployment.md) - 测试与部署

#### 技术栈
- **后端**: Python 3.10+, Flask 2.x, Pandas
- **前端**: Bootstrap 5, Jinja2, HTML5/CSS3
- **部署**: Gunicorn, Heroku
- **测试**: Unittest

#### 预计时间线
- **阶段1**: 数据提取（30分钟） - Week 1
- **阶段2**: Flask架构（45分钟） - Week 1
- **阶段3**: Web界面（60分钟） - Week 2
- **阶段4**: 核心功能（45分钟） - Week 2
- **阶段5**: 测试部署（30分钟） - Week 2

**总计**: 约3-3.5小时开发时间，2周完成

---

### 📋 v1.5 - 增强版（计划中）

**目标完成时间**: 2026年Q1
**状态**: 待规划

#### 计划功能

1. **用户系统**
   - 用户注册/登录
   - 个人资料管理
   - 收藏喜欢的牌

2. **占卜历史**
   - 保存历史占卜记录
   - 查看过往解读
   - 导出占卜结果（PDF/图片）

3. **更多占卜布局**
   - 关系布局（Relationship Spread）
   - 生日布局（Birthday Spread）
   - 决策布局（Decision Spread）
   - 自定义布局

4. **学习资源**
   - 塔罗牌学习指南
   - 每日一牌（Daily Card）
   - 牌义解析文章
   - 视频教程嵌入

5. **数据分析**
   - 统计用户最常抽到的牌
   - 占卜趋势分析
   - 个性化推荐

#### 技术升级
- 数据库集成（SQLite/PostgreSQL）
- 用户认证（Flask-Login）
- API设计（RESTful）
- 缓存优化（Redis）

---

### 📋 v2.0 - 社区版（远期规划）

**目标完成时间**: 2026年Q3
**状态**: 概念阶段

#### 愿景功能

1. **社区互动**
   - 分享占卜结果到社区
   - 评论和点赞功能
   - 用户间交流论坛
   - 占卜师认证系统

2. **多语言支持**
   - 中文（简体/繁体）
   - 英文
   - 日文
   - 其他主要语言

3. **付费功能**
   - 高级占卜布局
   - 专业占卜师在线咨询
   - 会员订阅系统
   - 定制化解读服务

4. **移动应用**
   - iOS App
   - Android App
   - React Native开发

5. **AI增强**
   - AI生成个性化解读
   - 自然语言问答
   - 智能推荐系统

#### 技术架构
- 微服务架构
- Docker容器化
- CI/CD自动化部署
- 负载均衡和高可用
- 大数据分析

---

## 技术债务管理

### 当前技术债

1. **数据管理**
   - ⚠️ 参考项目使用硬编码Python字典（需改进）
   - ✅ 当前项目使用CSV（良好）
   - 📋 计划：统一使用CSV格式，便于维护

2. **测试覆盖**
   - ⚠️ 参考项目无测试（需补充）
   - ✅ 当前项目有UnitTest（保持）
   - 📋 计划：扩展到Flask路由测试

3. **部署配置**
   - ⚠️ 当前项目无部署配置
   - ✅ 参考项目有Heroku配置（借鉴）
   - 📋 计划：添加完整部署文档

### 重构计划

1. **v1.0阶段**
   - 重构类结构：OpeningMessage → 模板化
   - 重构数据处理：PandasToList → CardManager
   - 新增ReadingEngine类

2. **v1.5阶段**
   - 引入数据库ORM（SQLAlchemy）
   - API层重构
   - 前后端分离

---

## 成功指标

### v1.0成功标准
- ✅ 78张牌完整集成
- ✅ 3种占卜布局正常运行
- ✅ Web界面响应式设计
- ✅ 单元测试覆盖率 ≥ 80%
- ✅ 成功部署到Heroku
- ✅ 页面加载时间 < 3秒

### v1.5成功标准
- 用户注册数 > 1000
- 每日活跃用户 > 100
- 占卜记录保存率 > 60%
- 用户留存率（7天） > 30%

### v2.0成功标准
- 注册用户 > 50,000
- 付费用户转化率 > 5%
- 多语言覆盖 > 5种语言
- 移动应用下载量 > 10,000

---

## 风险评估

### 高风险项
1. **技术栈迁移** (v1.0)
   - 风险：从CLI到Web架构变化大
   - 缓解：保持核心逻辑不变，渐进式迁移

2. **数据质量** (v1.0)
   - 风险：78张牌数据提取可能有误
   - 缓解：人工校验 + 自动化测试

3. **性能瓶颈** (v1.5)
   - 风险：用户增长导致性能问题
   - 缓解：提前优化、引入缓存

### 中风险项
1. **用户接受度** (v1.5)
   - 风险：用户可能不习惯新功能
   - 缓解：用户反馈机制 + A/B测试

2. **资源限制** (v2.0)
   - 风险：开发资源和时间不足
   - 缓解：分阶段实施，优先级排序

---

## 决策记录

### 2025-11-21 - Web化改造决策

**背景**:
- 发现参考项目python-tarot-master具有完整Web功能
- 当前CLI项目架构良好但功能受限

**决策**:
1. ✅ 采用Flask框架（而非Django）- 轻量级，适合中小型项目
2. ✅ 保留CSV数据格式 - 易于维护，避免硬编码
3. ✅ 保持OOP架构 - 重构而非重写
4. ✅ 整合78张完整牌库 - 提供完整体验
5. ✅ 使用Bootstrap 5 - 现代化UI框架

**理由**:
- Flask学习曲线平缓，适合快速开发
- CSV数据与代码分离，便于非开发人员更新内容
- 现有代码质量高，值得保留
- 完整牌库是专业塔罗平台的必备

**替代方案**:
- ❌ Django框架 - 过于重量级
- ❌ 硬编码数据 - 难以维护
- ❌ 重写项目 - 浪费现有代码

---

## 参考资源

### 技术文档
- [Flask官方文档](https://flask.palletsprojects.com/)
- [Bootstrap 5文档](https://getbootstrap.com/docs/5.0/)
- [Pandas文档](https://pandas.pydata.org/docs/)

### 塔罗牌资源
- [Biddy Tarot](https://www.biddytarot.com/) - 塔罗牌学习资源
- [Learn Tarot](https://www.learntarot.com/) - 在线教程
- [AE Waite Tarot](https://en.wikipedia.org/wiki/Rider%E2%80%93Waite_Tarot) - 经典牌组

### 参考项目
- `reference_project/python-tarot-master` - Web应用参考
- 当前CLI项目 - 架构参考

---

**最后更新**: 2025-11-21
**下次审查**: 2025-12-01
**维护者**: 开发团队
